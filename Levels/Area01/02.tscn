[gd_scene load_steps=24 format=4 uid="uid://uqb8s3jnfov"]

[ext_resource type="Script" uid="uid://gmpt3se7oed1" path="res://Levels/scripts/level.gd" id="1_x70af"]
[ext_resource type="AudioStream" uid="uid://bdq8vl4d8p62d" path="res://Levels/Music/example_music_01.ogg" id="2_icgqb"]
[ext_resource type="PackedScene" uid="uid://6c813gpotmec" path="res://Levels/player_spawn.tscn" id="3_mwxiv"]
[ext_resource type="PackedScene" uid="uid://bb8dgsbakkvln" path="res://Tile Maps/grass-tiles-01.tscn" id="4_m4nom"]
[ext_resource type="PackedScene" uid="uid://blmuv7dk7ny5" path="res://Props/Plants/plant.tscn" id="4_tek06"]
[ext_resource type="PackedScene" uid="uid://bb0ycm44mxofe" path="res://Levels/level_transition.tscn" id="5_mwxiv"]
[ext_resource type="PackedScene" uid="uid://cjmtuh5qbw2pw" path="res://npc/npc.tscn" id="7_icgqb"]
[ext_resource type="Resource" uid="uid://c1rvd27i7p1rp" path="res://npc/00_npcs/npc_01.tres" id="8_jeo2k"]
[ext_resource type="PackedScene" uid="uid://b0p20sqekaail" path="res://npc/npc_behavior_wander.tscn" id="8_ua1y0"]
[ext_resource type="PackedScene" uid="uid://cambwa8ai73iq" path="res://npc/npc_behavior_patrol.tscn" id="10_q5iyu"]
[ext_resource type="PackedScene" uid="uid://55x2ugrkellt" path="res://Interactables/dialog/dialog_interaction.tscn" id="10_sci0f"]
[ext_resource type="Script" uid="uid://doa5j8sxy5b7q" path="res://Interactables/dialog/scripts/dialog_text.gd" id="11_r3wde"]
[ext_resource type="PackedScene" uid="uid://phj3xxek733m" path="res://npc/patrol_location.tscn" id="11_sci0f"]
[ext_resource type="Resource" uid="uid://cggy6yuevygk6" path="res://npc/00_npcs/00_hero.tres" id="12_isjcn"]
[ext_resource type="Resource" uid="uid://cbptihicswji3" path="res://npc/00_npcs/npc_02.tres" id="15_mxs1d"]
[ext_resource type="Script" uid="uid://fshksdm1ixai" path="res://Interactables/dialog/scripts/dialog_choice.gd" id="16_xiy2e"]
[ext_resource type="Script" uid="uid://c5uj5hel8n7vv" path="res://Interactables/dialog/scripts/dialog_branch.gd" id="17_j3pfp"]
[ext_resource type="PackedScene" uid="uid://dsqvx0e8msa5u" path="res://Props/pot/Pot.tscn" id="18_j3pfp"]
[ext_resource type="PackedScene" uid="uid://ds8xpl317dck1" path="res://Interactables/Dungeon/pressure_plate.tscn" id="19_2rucc"]
[ext_resource type="Resource" uid="uid://d2k348kbuqax4" path="res://quests/recover_lost_flute.tres" id="20_2rucc"]
[ext_resource type="PackedScene" uid="uid://cq546xmyh16lb" path="res://quests/utility_nodes/quest_advance_trigger.tscn" id="20_wrnjp"]
[ext_resource type="Resource" uid="uid://ditbdn2uxoskb" path="res://quests/long_quest.tres" id="21_wrnjp"]
[ext_resource type="PackedScene" uid="uid://dfao1r52i6rrt" path="res://quests/utility_nodes/quest_activated_switch.tscn" id="23_xflnv"]

[node name="02" type="Node2D"]
script = ExtResource("1_x70af")
music = ExtResource("2_icgqb")

[node name="grass-tiles-01" parent="." instance=ExtResource("4_m4nom")]
z_index = -2
tile_map_data = PackedByteArray("AAD+//7/AQAAAAAAAAD+////AQACAAQAAAD+/wAAAQACAAUAAAD+/wEAAQACAAYAAAD+/wIAAQANAAQAAAD+/wMAAQABAAIAAAD+/wQAAQABAAIAAAD+/wUAAQABAAIAAAD+/wYAAQABAAIAAAD+/wcAAQABAAIAAAD+/wgAAQABAAIAAAD+/wkAAQABAAIAAAD///7/AQABAAAAAAD/////AQACAAQAAAD//wAAAQACAAUAAAD//wEAAQACAAYAAAD//wIAAQAOAAQAAAD//wMAAQAOAAUAAAD//wQAAQAOAAUAAAD//wUAAQAOAAUAAAD//wYAAQAOAAUAAAD//wcAAQAOAAUAAAD//wgAAQAOAAUAAAD//wkAAQAOAAUAAAAAAP7/AQACAAAAAAAAAP//AQACAAQAAAAAAAAAAQACAAUAAAAAAAEAAQACAAYAAAAAAAIAAQABAAIAAAAAAAMAAQABAAIAAAAAAAQAAQABAAIAAAAAAAUAAQABAAIAAAAAAAYAAQAFAAAAAAAAAAcAAQAEAAEAAAAAAAgAAQAEAAIAAAAAAAkAAQAKAAQAAAABAP7/AQAAAAEAAAABAP//AQACAAQAAAABAAAAAQACAAUAAAABAAEAAQACAAYAAAABAAIAAQABAAIAAAABAAMAAQABAAIAAAABAAQAAQABAAIAAAABAAUAAQAFAAAAAAABAAYAAQAHAAIAAAABAAcAAQABAAIAAAABAAgAAQABAAIAAAABAAkAAQALAAQAAAACAP7/AQABAAEAAAACAP//AQACAAQAAAACAAAAAQACAAUAAAACAAEAAQACAAYAAAACAAIAAQABAAIAAAACAAMAAQABAAIAAAACAAQAAQABAAIAAAACAAUAAQAGAAMAAAACAAYAAQABAAIAAAACAAcAAQABAAIAAAACAAgAAQABAAIAAAACAAkAAQAMAAQAAAADAP7/AQACAAEAAAADAP//AQACAAQAAAADAAAAAQACAAUAAAADAAEAAQACAAYAAAADAAIAAQABAAIAAAADAAMAAQABAAIAAAADAAQAAQABAAIAAAADAAUAAQAGAAMAAAADAAYAAQABAAIAAAADAAcAAQABAAIAAAADAAgAAQABAAIAAAADAAkAAQANAAQAAAAEAP7/AQAAAAAAAAAEAP//AQADAAQAAAAEAAAAAQADAAUAAAAEAAEAAQANAAcAAAAEAAIAAQABAAIAAAAEAAMAAQAEAAAAAAAEAAQAAQAEAAEAAAAEAAUAAQAGAAIAAAAEAAYAAQABAAIAAAAEAAcAAQABAAIAAAAEAAgAAQABAAIAAAAEAAkAAQAMAAQAAAAFAP7/AQAOAAUAAAAFAP//AQAOAAYAAAAFAAAAAQAJAAcAAAAFAAEAAQAOAAcAAAAFAAIAAQABAAIAAAAFAAMAAQABAAIAAAAFAAQAAQABAAIAAAAFAAUAAQAGAAMAAAAFAAYAAQABAAIAAAAFAAcAAQAEAAMAAAAFAAgAAQABAAIAAAAFAAkAAQAMAAQAAAAGAAEAAQAMAAMAAAAGAAIAAQABAAIAAAAGAAMAAQABAAIAAAAGAAQAAQABAAIAAAAGAAUAAQAHAAMAAAAGAAYAAQABAAIAAAAGAAcAAQABAAIAAAAGAAgAAQABAAIAAAAGAAkAAQAMAAQAAAAHAAEAAQAJAAIAAAAHAAIAAQAMAAEAAAAHAAMAAQAFAAIAAAAHAAQAAQABAAIAAAAHAAUAAQABAAIAAAAHAAYAAQABAAIAAAAHAAcAAQABAAIAAAAHAAgAAQABAAIAAAAHAAkAAQAMAAQAAAAIAAEAAQAPAAIAAAAIAAIAAQAPAAIAAAAIAAMAAQAKAAEAAAAIAAQAAQAMAAEAAAAIAAUAAQAMAAMAAAAIAAYAAQABAAIAAAAIAAcAAQABAAIAAAAIAAgAAQABAAIAAAAIAAkAAQAMAAQAAAAJAP7/AQAKAAUAAAAJAP//AQAKAAYAAAAJAAAAAQAJAAYAAAAJAAEAAQAKAAcAAAAJAAIAAQABAAIAAAAJAAMAAQAPAAAAAAAJAAQAAQAKAAEAAAAJAAUAAQANAAMAAAAJAAYAAQABAAIAAAAJAAcAAQABAAIAAAAJAAgAAQABAAIAAAAJAAkAAQAMAAQAAAAKAP7/AQABAAMAAAAKAP//AQADAAQAAAAKAAAAAQADAAUAAAAKAAEAAQALAAcAAAAKAAIAAQABAAIAAAAKAAMAAQABAAIAAAAKAAQAAQAKAAAAAAAKAAUAAQAPAAIAAAAKAAYAAQAMAAMAAAAKAAcAAQABAAIAAAAKAAgAAQABAAIAAAAKAAkAAQAMAAQAAAALAP7/AQABAAMAAAALAP//AQADAAQAAAALAAAAAQADAAUAAAALAAEAAQADAAYAAAALAAIAAQABAAIAAAALAAMAAQABAAIAAAALAAQAAQAHAAMAAAALAAUAAQABAAIAAAALAAYAAQAHAAMAAAALAAcAAQABAAIAAAALAAgAAQABAAIAAAALAAkAAQAMAAQAAAAMAP7/AQABAAMAAAAMAP//AQADAAQAAAAMAAAAAQADAAUAAAAMAAEAAQADAAYAAAAMAAIAAQABAAIAAAAMAAMAAQABAAIAAAAMAAQAAQABAAIAAAAMAAUAAQABAAIAAAAMAAYAAQABAAIAAAAMAAcAAQABAAIAAAAMAAgAAQABAAIAAAAMAAkAAQAMAAQAAAANAP7/AQABAAEAAAANAP//AQAEAAQAAAANAAAAAQAEAAUAAAANAAEAAQAEAAYAAAANAAIAAQABAAIAAAANAAMAAQABAAIAAAANAAQAAQABAAIAAAANAAUAAQABAAIAAAANAAYAAQABAAIAAAANAAcAAQABAAIAAAANAAgAAQABAAIAAAANAAkAAQAMAAQAAAAOAP7/AQACAAEAAAAOAP//AQACAAQAAAAOAAAAAQACAAUAAAAOAAEAAQACAAYAAAAOAAIAAQABAAIAAAAOAAMAAQABAAIAAAAOAAQAAQABAAIAAAAOAAUAAQABAAIAAAAOAAYAAQABAAIAAAAOAAcAAQABAAIAAAAOAAgAAQABAAIAAAAOAAkAAQAOAAQAAAAPAP7/AQADAAEAAAAPAP//AQADAAQAAAAPAAAAAQADAAUAAAAPAAEAAQADAAYAAAAPAAIAAQAKAAQAAAAPAAMAAQAKAAUAAAAPAAQAAQAKAAUAAAAPAAUAAQAKAAUAAAAPAAYAAQAKAAUAAAAPAAcAAQAKAAUAAAAPAAgAAQAKAAUAAAAPAAkAAQAKAAUAAAAQAP7/AQABAAMAAAAQAP//AQAEAAQAAAAQAAAAAQAEAAUAAAAQAAEAAQAEAAYAAAAQAAIAAQALAAQAAAAQAAMAAQABAAIAAAAQAAQAAQABAAIAAAAQAAUAAQABAAIAAAAQAAYAAQABAAIAAAAQAAcAAQABAAIAAAAQAAgAAQABAAIAAAAQAAkAAQABAAIAAAAGAAAAAQAMAAEAAAAGAP//AQAMAAEAAAAGAP7/AQAMAAEAAAAIAAAAAQAPAAIAAAAIAP//AQAPAAIAAAAIAP7/AQAPAAIAAAAHAAAAAQANAAIAAAAHAP//AQANAAIAAAAHAP7/AQANAAIAAAA=")

[node name="PlayerSpawn" parent="." instance=ExtResource("3_mwxiv")]
position = Vector2(243, 244)

[node name="Plant" parent="." instance=ExtResource("4_tek06")]
position = Vector2(512, 184)

[node name="Plant5" parent="." instance=ExtResource("4_tek06")]
position = Vector2(384, 176)

[node name="Plant6" parent="." instance=ExtResource("4_tek06")]
position = Vector2(400, 272)

[node name="Plant2" parent="." instance=ExtResource("4_tek06")]
position = Vector2(128, 152)

[node name="Plant3" parent="." instance=ExtResource("4_tek06")]
position = Vector2(88, 216)

[node name="Plant4" parent="." instance=ExtResource("4_tek06")]
position = Vector2(120, 192)

[node name="LevelTransition" parent="." instance=ExtResource("5_mwxiv")]
position = Vector2(240, -64)
level = "uid://c7ybst78fw08y"
size = 3
side = 2

[node name="NPC" parent="." instance=ExtResource("7_icgqb")]
position = Vector2(448, 216)
npc_resource = ExtResource("8_jeo2k")

[node name="NpcBehaviorWander" parent="NPC" instance=ExtResource("8_ua1y0")]

[node name="DialogInteraction" parent="NPC" instance=ExtResource("10_sci0f")]

[node name="DialogText2" type="Node" parent="NPC/DialogInteraction"]
script = ExtResource("11_r3wde")
text = "
Hi[b] Hero[/b], can I help you?"
npc_info = ExtResource("8_jeo2k")
metadata/_custom_type_script = "uid://doa5j8sxy5b7q"

[node name="DialogText" type="Node" parent="NPC/DialogInteraction"]
script = ExtResource("11_r3wde")
text = "
Hi, Actually yes!
You can help me with one thing"
npc_info = ExtResource("12_isjcn")
metadata/_custom_type_script = "uid://doa5j8sxy5b7q"

[node name="DialogText3" type="Node" parent="NPC/DialogInteraction"]
script = ExtResource("11_r3wde")
text = "Alright
So, what is troubling you?"
npc_info = ExtResource("8_jeo2k")
metadata/_custom_type_script = "uid://doa5j8sxy5b7q"

[node name="Nero" parent="." instance=ExtResource("7_icgqb")]
position = Vector2(192, 232)
npc_resource = ExtResource("15_mxs1d")

[node name="NpcBehaviorPatrol" parent="Nero" instance=ExtResource("10_q5iyu")]

[node name="PatrolLocation" parent="Nero/NpcBehaviorPatrol" instance=ExtResource("11_sci0f")]
modulate = Color(1, 0, 0, 1)
wait_time = 1.0

[node name="PatrolLocation2" parent="Nero/NpcBehaviorPatrol" instance=ExtResource("11_sci0f")]
modulate = Color(1, 1, 0, 1)
position = Vector2(-40, -96)
wait_time = 2.0

[node name="PatrolLocation3" parent="Nero/NpcBehaviorPatrol" instance=ExtResource("11_sci0f")]
modulate = Color(0, 1, 0, 1)
position = Vector2(-48, -56)
wait_time = 2.0

[node name="PatrolLocation5" parent="Nero/NpcBehaviorPatrol" instance=ExtResource("11_sci0f")]
modulate = Color(0, 1, 1, 1)
position = Vector2(-48, -32)

[node name="PatrolLocation6" parent="Nero/NpcBehaviorPatrol" instance=ExtResource("11_sci0f")]
modulate = Color(0, 0, 1, 1)
position = Vector2(-72, -24)
wait_time = 2.0

[node name="PatrolLocation7" parent="Nero/NpcBehaviorPatrol" instance=ExtResource("11_sci0f")]
modulate = Color(1, 0, 1, 1)
position = Vector2(-80, 0)

[node name="PatrolLocation8" parent="Nero/NpcBehaviorPatrol" instance=ExtResource("11_sci0f")]
modulate = Color(1, 0, 0, 1)
position = Vector2(-104, 0)
wait_time = 2.0

[node name="DialogInteraction" parent="Nero" instance=ExtResource("10_sci0f")]

[node name="DialogText" type="Node" parent="Nero/DialogInteraction"]
script = ExtResource("11_r3wde")
text = "You! Hero! Will you help me retrieve my magical flute from the dark dungeon?"
npc_info = ExtResource("15_mxs1d")
metadata/_custom_type_script = "uid://doa5j8sxy5b7q"

[node name="DialogChoice" type="Node" parent="Nero/DialogInteraction"]
script = ExtResource("16_xiy2e")
npc_info = ExtResource("15_mxs1d")
metadata/_custom_type_script = "uid://fshksdm1ixai"

[node name="DialogBranch" type="Node" parent="Nero/DialogInteraction/DialogChoice"]
script = ExtResource("17_j3pfp")
text = "Sure"
npc_info = ExtResource("15_mxs1d")
metadata/_custom_type_script = "uid://c5uj5hel8n7vv"

[node name="QuestAdvanceTrigger" parent="Nero/DialogInteraction/DialogChoice/DialogBranch" instance=ExtResource("20_wrnjp")]
position = Vector2(192, 192)
signal_name = "selected"
linked_quest = ExtResource("20_2rucc")
settings_summary = "UPDATE QUEST:
Quest: Recover Lost Flute
Step: 0 - N/A
Complete: false"

[node name="DialogText" type="Node" parent="Nero/DialogInteraction/DialogChoice/DialogBranch"]
script = ExtResource("11_r3wde")
text = "Thank you! You are a true speciment!"
npc_info = ExtResource("15_mxs1d")
metadata/_custom_type_script = "uid://doa5j8sxy5b7q"

[node name="DialogText2" type="Node" parent="Nero/DialogInteraction/DialogChoice/DialogBranch"]
script = ExtResource("11_r3wde")
text = "Oh, and be careful of the evil wizard who lurks in the dungeon!"
npc_info = ExtResource("15_mxs1d")
metadata/_custom_type_script = "uid://doa5j8sxy5b7q"

[node name="DialogBranch2" type="Node" parent="Nero/DialogInteraction/DialogChoice"]
script = ExtResource("17_j3pfp")
text = "I'll think about this"
npc_info = ExtResource("15_mxs1d")
metadata/_custom_type_script = "uid://c5uj5hel8n7vv"

[node name="DialogText4" type="Node" parent="Nero/DialogInteraction/DialogChoice/DialogBranch2"]
script = ExtResource("11_r3wde")
text = "Oh..."
npc_info = ExtResource("15_mxs1d")
metadata/_custom_type_script = "uid://doa5j8sxy5b7q"

[node name="DialogText3" type="Node" parent="Nero/DialogInteraction/DialogChoice/DialogBranch2"]
script = ExtResource("11_r3wde")
text = "Alright, but don't think too long. I really need this flute "
npc_info = ExtResource("15_mxs1d")
metadata/_custom_type_script = "uid://doa5j8sxy5b7q"

[node name="Pot" parent="." instance=ExtResource("18_j3pfp")]
position = Vector2(216, 288)

[node name="Pot2" parent="." instance=ExtResource("18_j3pfp")]
position = Vector2(264, 296)

[node name="PressurePlate" parent="." instance=ExtResource("19_2rucc")]
z_index = -1
position = Vector2(352, 112)

[node name="QuestAdvanceTrigger" parent="PressurePlate" instance=ExtResource("20_wrnjp")]
signal_name = "activated"
linked_quest = ExtResource("21_wrnjp")
settings_summary = "UPDATE QUEST:
Quest: Long Quest
Step: 0 - N/A
Complete: false"

[node name="QuestActivatedSwitch" parent="." instance=ExtResource("23_xflnv")]
position = Vector2(400, 112)
check_type = 0
remove_when_activated = false
react_to_global_signal = true
linked_quest = ExtResource("21_wrnjp")
settings_summary = "UPDATE QUEST:
Quest: Long Quest
Checking if player has quest"

[node name="PressurePlate2" parent="QuestActivatedSwitch" instance=ExtResource("19_2rucc")]
z_index = -1

[node name="QuestAdvanceTrigger" parent="QuestActivatedSwitch/PressurePlate2" instance=ExtResource("20_wrnjp")]
signal_name = "activated"
linked_quest = ExtResource("21_wrnjp")
quest_step = 1
settings_summary = "UPDATE QUEST:
Quest: Long Quest
Step: 1 - step 1
Complete: false"

[node name="QuestActivatedSwitch2" parent="." instance=ExtResource("23_xflnv")]
position = Vector2(448, 112)
check_type = 1
remove_when_activated = false
react_to_global_signal = true
linked_quest = ExtResource("21_wrnjp")
quest_step = 1
settings_summary = "UPDATE QUEST:
Quest: Long Quest
Checking if player has completed step: step 1"

[node name="PressurePlate3" parent="QuestActivatedSwitch2" instance=ExtResource("19_2rucc")]
z_index = -1

[node name="QuestAdvanceTrigger" parent="QuestActivatedSwitch2/PressurePlate3" instance=ExtResource("20_wrnjp")]
signal_name = "activated"
linked_quest = ExtResource("21_wrnjp")
quest_step = 2
settings_summary = "UPDATE QUEST:
Quest: Long Quest
Step: 2 - step 2
Complete: false"
